<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LDAH Page Editor</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary-blue: #004E7C; --light-blue: #0066a1; --accent-teal: #4DD0E1; --text-dark: #1a1a1a; --text-light: #666; --bg-light: #f8f9fa; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Inter', sans-serif; background: #f5f5f5; }
        h1, h2, h3 { font-family: 'Poppins', sans-serif; font-weight: 700; }
        
        .admin-panel { position: fixed; right: 0; top: 0; bottom: 0; width: 380px; background: white; box-shadow: -4px 0 20px rgba(0,0,0,0.15); transform: translateX(100%); transition: transform 0.3s; z-index: 1000; overflow-y: auto; }
        .admin-panel.open { transform: translateX(0); }
        .admin-panel-header { background: var(--primary-blue); color: white; padding: 1rem; position: sticky; top: 0; z-index: 10; }
        .admin-toggle { position: fixed; right: 20px; bottom: 20px; z-index: 999; padding: 14px 24px; background: var(--primary-blue); color: white; border-radius: 50px; border: none; box-shadow: 0 4px 20px rgba(0,78,124,0.4); cursor: pointer; font-weight: 600; }
        .admin-toggle:hover { background: var(--light-blue); }
        
        .editable-section { position: relative; border: 2px dashed transparent; transition: all 0.3s; cursor: pointer; border-radius: 8px; padding: 4px; margin: -4px; }
        .editable-section:hover { border-color: var(--accent-teal); background: rgba(77,208,225,0.1); }
        .edit-indicator { position: absolute; top: -12px; right: 5px; background: var(--accent-teal); color: var(--primary-blue); padding: 2px 10px; font-size: 11px; border-radius: 4px; font-weight: 600; opacity: 0; transition: opacity 0.3s; pointer-events: none; }
        .editable-section:hover .edit-indicator { opacity: 1; }
        
        .page-nav { background: #1a1a2e; padding: 0.75rem 1rem; position: sticky; top: 0; z-index: 100; }
        .page-nav-inner { max-width: 1400px; margin: 0 auto; display: flex; align-items: center; gap: 0.35rem; flex-wrap: wrap; }
        .page-nav h1 { color: white; font-size: 1rem; margin-right: auto; white-space: nowrap; }
        .page-btn { background: rgba(255,255,255,0.1); color: white; border: none; padding: 0.4rem 0.7rem; border-radius: 6px; cursor: pointer; font-size: 0.75rem; transition: all 0.2s; text-decoration: none; white-space: nowrap; }
        .page-btn:hover, .page-btn.active { background: var(--primary-blue); }
        .page-btn.active { box-shadow: 0 0 0 2px var(--accent-teal); }
        
        .page-preview-container { max-width: 1200px; margin: 0 auto; background: white; min-height: calc(100vh - 50px); }
        .page-preview { display: none; }
        .page-preview.active { display: block; }
        
        .hero-section { background: linear-gradient(135deg, #004E7C, #0066a1); color: white; padding: 50px 20px; text-align: center; position: relative; }
        .hero-section h1 { font-size: 2.2em; margin-bottom: 12px; }
        .hero-section p { font-size: 1.1em; max-width: 800px; margin: 0 auto; opacity: 0.95; }
        .highlight { color: var(--accent-teal); }
        
        .content-wrapper { max-width: 1000px; margin: 0 auto; padding: 40px 20px; }
        .section-header { text-align: center; margin-bottom: 25px; }
        .section-header h2 { color: var(--primary-blue); font-size: 1.6rem; margin-bottom: 8px; }
        .section-header p { color: var(--text-light); font-size: 0.95rem; }
        
        .cta-section { background: linear-gradient(135deg, #004E7C, #0066a1); color: white; padding: 50px 20px; text-align: center; }
        .cta-section h2 { font-size: 1.8rem; margin-bottom: 10px; }
        .cta-section p { font-size: 1rem; max-width: 600px; margin: 0 auto 1.5rem; opacity: 0.95; }
        
        .placeholder-section { background: var(--bg-light); padding: 2.5rem; border-radius: 12px; text-align: center; color: var(--text-light); margin: 1rem 0; }
        
        .edit-form { padding: 1rem; display: none; }
        .edit-form.active { display: block; }
        .edit-form label { display: block; font-weight: 600; margin-bottom: 0.5rem; color: var(--text-dark); }
        .edit-form textarea { width: 100%; padding: 0.75rem; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 1rem; margin-bottom: 1rem; font-family: inherit; min-height: 120px; resize: vertical; }
        .edit-form textarea:focus { outline: none; border-color: var(--primary-blue); }
        .btn-row { display: flex; gap: 0.5rem; }
        .btn-save { flex: 1; background: var(--primary-blue); color: white; border: none; padding: 0.75rem; border-radius: 8px; font-weight: 600; cursor: pointer; }
        .btn-cancel { flex: 1; background: #e2e8f0; color: var(--text-dark); border: none; padding: 0.75rem; border-radius: 8px; font-weight: 600; cursor: pointer; }
        
        .welcome-panel { padding: 1.5rem; }
        .welcome-panel h3 { color: var(--primary-blue); margin-bottom: 1rem; }
        .welcome-panel ul { list-style: none; margin-bottom: 1.5rem; }
        .welcome-panel li { padding: 0.4rem 0; color: var(--text-light); }
        .welcome-panel li::before { content: "âœ“ "; color: var(--primary-blue); }
        .login-box { background: #f0f9ff; border: 1px solid #bae6fd; border-radius: 8px; padding: 1rem; }
        .login-box input { width: 100%; padding: 0.75rem; border: 2px solid #e2e8f0; border-radius: 8px; margin-bottom: 0.5rem; }
        .login-box button { width: 100%; background: var(--primary-blue); color: white; border: none; padding: 0.75rem; border-radius: 8px; font-weight: 600; cursor: pointer; }
        .logged-in-box { background: #f0fdf4; border: 1px solid #bbf7d0; border-radius: 8px; padding: 1rem; display: none; }
        .logged-in-box.active { display: block; }
        .logged-in-box p { color: #166534; margin-bottom: 0.5rem; }
        .btn-logout { width: 100%; background: #ef4444; color: white; border: none; padding: 0.75rem; border-radius: 8px; font-weight: 600; cursor: pointer; }
        
        @media (max-width: 900px) { .page-btn { padding: 0.3rem 0.5rem; font-size: 0.7rem; } .page-nav h1 { font-size: 0.85rem; } }
    </style>
</head>
<body>
    <nav class="page-nav">
        <div class="page-nav-inner">
            <h1>ğŸ“„ Page Editor</h1>
            <button class="page-btn active" onclick="switchPage('home', this)">ğŸ  Home</button>
            <button class="page-btn" onclick="switchPage('whoweare', this)">ğŸ‘¥ Who We Are</button>
            <button class="page-btn" onclick="switchPage('events', this)">ğŸ“… Events</button>
            <button class="page-btn" onclick="switchPage('volunteer', this)">ğŸ¤ Volunteer</button>
            <button class="page-btn" onclick="switchPage('resources', this)">ğŸ“š Resources</button>
            <button class="page-btn" onclick="switchPage('contact', this)">âœ‰ï¸ Contact</button>
            <button class="page-btn" onclick="switchPage('readiness', this)">ğŸ“ Readiness</button>
            <button class="page-btn" onclick="switchPage('specialed', this)">âš–ï¸ Special Ed</button>
            <button class="page-btn" onclick="switchPage('military', this)">ğŸ‡ºğŸ‡¸ Military</button>
            <button class="page-btn" onclick="switchPage('pacific', this)">ğŸï¸ Pacific</button>
            <button class="page-btn" onclick="switchPage('community', this)">âœŠ Bullying</button>
            <a href="cms.html" class="page-btn" style="margin-left: auto;">â† CMS</a>
        </div>
    </nav>

    <div class="admin-panel" id="adminPanel">
        <div class="admin-panel-header"><h2 style="font-size: 1.1rem;">âœï¸ Edit Content</h2></div>
        <div class="edit-form" id="editForm">
            <label id="editLabel">Editing...</label>
            <input type="hidden" id="editId"><input type="hidden" id="editPage">
            <textarea id="editContent" placeholder="Enter content..."></textarea>
            <div class="btn-row"><button class="btn-cancel" onclick="cancelEdit()">Cancel</button><button class="btn-save" onclick="saveContent()">ğŸ’¾ Save</button></div>
        </div>
        <div class="welcome-panel" id="welcomePanel">
            <h3>ğŸ‘‹ Welcome!</h3>
            <ul><li>Select a page tab above</li><li>Click any text to edit</li><li>Changes save to Firebase</li></ul>
            <div class="login-box" id="loginBox">
                <p style="font-size: 0.85rem; color: #666; margin-bottom: 0.75rem;">ğŸ” Login to edit:</p>
                <input type="email" id="adminEmail" placeholder="Email">
                <input type="password" id="adminPassword" placeholder="Password" onkeypress="if(event.key==='Enter')login()">
                <button onclick="login()">Login</button>
            </div>
            <div class="logged-in-box" id="loggedInBox">
                <p>âœ… Logged in as:</p><p style="font-size: 0.85rem;" id="userEmail"></p>
                <button class="btn-logout" onclick="logout()">ğŸšª Logout</button>
            </div>
        </div>
    </div>
    <button class="admin-toggle" id="adminToggle" onclick="toggleAdmin()">ğŸ“ Edit</button>

    <div class="page-preview-container">
        <!-- HOME -->
        <div class="page-preview active" id="home-preview">
            <section class="hero-section">
                <div class="editable-section" onclick="editField('home', 'heroTitle', 'Hero Title')"><span class="edit-indicator">âœï¸</span><h1 id="home-heroTitle">Empowering Families, <span class="highlight">Transforming Lives</span></h1></div>
                <div class="editable-section" onclick="editField('home', 'heroSubtitle', 'Hero Subtitle')"><span class="edit-indicator">âœï¸</span><p id="home-heroSubtitle">Supporting children and youth with disabilities across Hawai'i and the Pacific Islands.</p></div>
            </section>
            <div class="content-wrapper">
                <div class="section-header">
                    <div class="editable-section" onclick="editField('home', 'servicesTitle', 'Services Title')"><span class="edit-indicator">âœï¸</span><h2 id="home-servicesTitle">Comprehensive Support Services</h2></div>
                    <div class="editable-section" onclick="editField('home', 'servicesSubtitle', 'Services Subtitle')"><span class="edit-indicator">âœï¸</span><p id="home-servicesSubtitle">Services designed to empower families and support children with disabilities.</p></div>
                </div>
                <div class="placeholder-section"><p>ğŸ“‹ Services managed in CMS</p></div>
            </div>
            <section class="cta-section">
                <div class="editable-section" onclick="editField('home', 'ctaTitle', 'CTA Title')"><span class="edit-indicator">âœï¸</span><h2 id="home-ctaTitle">Ready to Make a Difference?</h2></div>
                <div class="editable-section" onclick="editField('home', 'ctaSubtitle', 'CTA Subtitle')"><span class="edit-indicator">âœï¸</span><p id="home-ctaSubtitle">Join our community of volunteers and advocates.</p></div>
            </section>
        </div>

        <!-- WHO WE ARE -->
        <div class="page-preview" id="whoweare-preview">
            <section class="hero-section">
                <div class="editable-section" onclick="editField('whoweare', 'heroTitle', 'Hero Title')"><span class="edit-indicator">âœï¸</span><h1 id="whoweare-heroTitle">Who We Are</h1></div>
                <div class="editable-section" onclick="editField('whoweare', 'heroSubtitle', 'Hero Subtitle')"><span class="edit-indicator">âœï¸</span><p id="whoweare-heroSubtitle">Leadership in Disabilities & Achievement of Hawai'i - a <span class="highlight">501(c)(3) non-profit</span> founded in 1968.</p></div>
            </section>
            <div class="content-wrapper">
                <div class="section-header">
                    <div class="editable-section" onclick="editField('whoweare', 'foundationTitle', 'Foundation Title')"><span class="edit-indicator">âœï¸</span><h2 id="whoweare-foundationTitle">Mission, Vision & Values</h2></div>
                    <div class="editable-section" onclick="editField('whoweare', 'foundationSubtitle', 'Foundation Subtitle')"><span class="edit-indicator">âœï¸</span><p id="whoweare-foundationSubtitle">Guiding principles driving our commitment to families</p></div>
                </div>
                <div class="placeholder-section"><p>ğŸ¯ Mission/Vision/Values cards</p></div>
            </div>
            <section class="cta-section">
                <div class="editable-section" onclick="editField('whoweare', 'ctaTitle', 'CTA Title')"><span class="edit-indicator">âœï¸</span><h2 id="whoweare-ctaTitle">Have Questions? We're Here to Help</h2></div>
                <div class="editable-section" onclick="editField('whoweare', 'ctaSubtitle', 'CTA Subtitle')"><span class="edit-indicator">âœï¸</span><p id="whoweare-ctaSubtitle">Our team is ready to assist with special education and advocacy support.</p></div>
            </section>
        </div>

        <!-- EVENTS -->
        <div class="page-preview" id="events-preview">
            <section class="hero-section">
                <div class="editable-section" onclick="editField('events', 'heroTitle', 'Hero Title')"><span class="edit-indicator">âœï¸</span><h1 id="events-heroTitle">ğŸ“… Events & Workshops</h1></div>
                <div class="editable-section" onclick="editField('events', 'heroSubtitle', 'Hero Subtitle')"><span class="edit-indicator">âœï¸</span><p id="events-heroSubtitle">Join us for training, workshops, and community events</p></div>
            </section>
            <div class="content-wrapper">
                <div class="section-header">
                    <div class="editable-section" onclick="editField('events', 'currentTitle', 'Current Events Title')"><span class="edit-indicator">âœï¸</span><h2 id="events-currentTitle">Upcoming Events</h2></div>
                </div>
                <div class="placeholder-section"><p>ğŸ“… Events load from Firebase</p></div>
            </div>
            <section class="cta-section">
                <div class="editable-section" onclick="editField('events', 'ctaTitle', 'CTA Title')"><span class="edit-indicator">âœï¸</span><h2 id="events-ctaTitle">Can't Find What You're Looking For?</h2></div>
                <div class="editable-section" onclick="editField('events', 'ctaSubtitle', 'CTA Subtitle')"><span class="edit-indicator">âœï¸</span><p id="events-ctaSubtitle">Contact us about upcoming workshops and events in your area.</p></div>
            </section>
        </div>

        <!-- VOLUNTEER -->
        <div class="page-preview" id="volunteer-preview">
            <section class="hero-section">
                <div class="editable-section" onclick="editField('volunteer', 'heroTitle', 'Hero Title')"><span class="edit-indicator">âœï¸</span><h1 id="volunteer-heroTitle">Volunteer Opportunities</h1></div>
                <div class="editable-section" onclick="editField('volunteer', 'heroSubtitle', 'Hero Subtitle')"><span class="edit-indicator">âœï¸</span><p id="volunteer-heroSubtitle">Make a difference in the lives of families and children with disabilities</p></div>
            </section>
            <div class="content-wrapper"><div class="placeholder-section"><p>ğŸ¤ Volunteer opportunities load from Firebase</p></div></div>
            <section class="cta-section">
                <div class="editable-section" onclick="editField('volunteer', 'ctaTitle', 'CTA Title')"><span class="edit-indicator">âœï¸</span><h2 id="volunteer-ctaTitle">Make a Difference Today</h2></div>
                <div class="editable-section" onclick="editField('volunteer', 'ctaSubtitle', 'CTA Subtitle')"><span class="edit-indicator">âœï¸</span><p id="volunteer-ctaSubtitle">Your time and skills can help families across Hawaii.</p></div>
            </section>
        </div>

        <!-- RESOURCES -->
        <div class="page-preview" id="resources-preview">
            <section class="hero-section">
                <div class="editable-section" onclick="editField('resources', 'heroTitle', 'Hero Title')"><span class="edit-indicator">âœï¸</span><h1 id="resources-heroTitle">ğŸ“š Resources</h1></div>
                <div class="editable-section" onclick="editField('resources', 'heroSubtitle', 'Hero Subtitle')"><span class="edit-indicator">âœï¸</span><p id="resources-heroSubtitle">Find helpful resources for families and children with disabilities.</p></div>
            </section>
            <div class="content-wrapper"><div class="placeholder-section"><p>ğŸ“š Resources load from Firebase</p></div></div>
            <section class="cta-section">
                <div class="editable-section" onclick="editField('resources', 'ctaTitle', 'CTA Title')"><span class="edit-indicator">âœï¸</span><h2 id="resources-ctaTitle">Need Help Finding the Right Resource?</h2></div>
                <div class="editable-section" onclick="editField('resources', 'ctaSubtitle', 'CTA Subtitle')"><span class="edit-indicator">âœï¸</span><p id="resources-ctaSubtitle">Our team is here to guide you and connect you with support.</p></div>
            </section>
        </div>

        <!-- CONTACT -->
        <div class="page-preview" id="contact-preview">
            <section class="hero-section">
                <div class="editable-section" onclick="editField('contact', 'heroTitle', 'Hero Title')"><span class="edit-indicator">âœï¸</span><h1 id="contact-heroTitle">Contact Us</h1></div>
                <div class="editable-section" onclick="editField('contact', 'heroSubtitle', 'Hero Subtitle')"><span class="edit-indicator">âœï¸</span><p id="contact-heroSubtitle">We're here to help your family navigate special education and disability services</p></div>
            </section>
            <div class="content-wrapper"><div class="placeholder-section"><p>ğŸ“ Office locations and contact form</p></div></div>
            <section class="cta-section">
                <div class="editable-section" onclick="editField('contact', 'ctaTitle', 'CTA Title')"><span class="edit-indicator">âœï¸</span><h2 id="contact-ctaTitle">Join Our Community</h2></div>
                <div class="editable-section" onclick="editField('contact', 'ctaSubtitle', 'CTA Subtitle')"><span class="edit-indicator">âœï¸</span><p id="contact-ctaSubtitle">Connect with other Hawaii families navigating special education.</p></div>
            </section>
        </div>

        <!-- READINESS -->
        <div class="page-preview" id="readiness-preview">
            <section class="hero-section">
                <div class="editable-section" onclick="editField('readiness', 'heroTitle', 'Hero Title')"><span class="edit-indicator">âœï¸</span><h1 id="readiness-heroTitle">ğŸ“ School Readiness Project</h1></div>
                <div class="editable-section" onclick="editField('readiness', 'heroSubtitle', 'Hero Subtitle')"><span class="edit-indicator">âœï¸</span><p id="readiness-heroSubtitle">Supporting children through developmental screenings, family support, and parent education.</p></div>
            </section>
            <div class="content-wrapper"><div class="placeholder-section"><p>ğŸ“‹ Program info, screenings, and services</p></div></div>
            <section class="cta-section">
                <div class="editable-section" onclick="editField('readiness', 'ctaTitle', 'CTA Title')"><span class="edit-indicator">âœï¸</span><h2 id="readiness-ctaTitle">Schedule a Screening</h2></div>
                <div class="editable-section" onclick="editField('readiness', 'ctaSubtitle', 'CTA Subtitle')"><span class="edit-indicator">âœï¸</span><p id="readiness-ctaSubtitle">Contact LDAH to schedule a screening event in your community.</p></div>
            </section>
        </div>

        <!-- SPECIAL ED -->
        <div class="page-preview" id="specialed-preview">
            <section class="hero-section">
                <div class="editable-section" onclick="editField('specialed', 'heroTitle', 'Hero Title')"><span class="edit-indicator">âœï¸</span><h1 id="specialed-heroTitle">âš–ï¸ Special Education Advocacy</h1></div>
                <div class="editable-section" onclick="editField('specialed', 'heroSubtitle', 'Hero Subtitle')"><span class="edit-indicator">âœï¸</span><p id="specialed-heroSubtitle">Expert guidance on IEPs, IDEA, Chapter 60, and other education laws.</p></div>
            </section>
            <div class="content-wrapper"><div class="placeholder-section"><p>ğŸ“š Resource documents and guides</p></div></div>
            <section class="cta-section">
                <div class="editable-section" onclick="editField('specialed', 'ctaTitle', 'CTA Title')"><span class="edit-indicator">âœï¸</span><h2 id="specialed-ctaTitle">Need Advocacy Support?</h2></div>
                <div class="editable-section" onclick="editField('specialed', 'ctaSubtitle', 'CTA Subtitle')"><span class="edit-indicator">âœï¸</span><p id="specialed-ctaSubtitle">Our team can help you understand your rights and navigate the special education system.</p></div>
            </section>
        </div>

        <!-- MILITARY -->
        <div class="page-preview" id="military-preview">
            <section class="hero-section">
                <div class="editable-section" onclick="editField('military', 'heroTitle', 'Hero Title')"><span class="edit-indicator">âœï¸</span><h1 id="military-heroTitle">ğŸ‡ºğŸ‡¸ Serving Military Families</h1></div>
                <div class="editable-section" onclick="editField('military', 'heroSubtitle', 'Hero Subtitle')"><span class="edit-indicator">âœï¸</span><p id="military-heroSubtitle">Supporting Hawaii's military families through transitions, education, and advocacy</p></div>
            </section>
            <div class="content-wrapper"><div class="placeholder-section"><p>ğŸ–ï¸ Military resources and videos</p></div></div>
            <section class="cta-section">
                <div class="editable-section" onclick="editField('military', 'ctaTitle', 'CTA Title')"><span class="edit-indicator">âœï¸</span><h2 id="military-ctaTitle">We're Here to Help</h2></div>
                <div class="editable-section" onclick="editField('military', 'ctaSubtitle', 'CTA Subtitle')"><span class="edit-indicator">âœï¸</span><p id="military-ctaSubtitle">Whether arriving or leaving Hawaii, our team is ready to support you and your family.</p></div>
            </section>
        </div>

        <!-- PACIFIC -->
        <div class="page-preview" id="pacific-preview">
            <section class="hero-section">
                <div class="editable-section" onclick="editField('pacific', 'heroTitle', 'Hero Title')"><span class="edit-indicator">âœï¸</span><h1 id="pacific-heroTitle">ğŸï¸ Pacific Islands Partnership</h1></div>
                <div class="editable-section" onclick="editField('pacific', 'heroSubtitle', 'Hero Subtitle')"><span class="edit-indicator">âœï¸</span><p id="pacific-heroSubtitle">Supporting families across the Pacific Islands with local partnerships.</p></div>
            </section>
            <div class="content-wrapper"><div class="placeholder-section"><p>ğŸŒº Island partner information</p></div></div>
            <section class="cta-section">
                <div class="editable-section" onclick="editField('pacific', 'ctaTitle', 'CTA Title')"><span class="edit-indicator">âœï¸</span><h2 id="pacific-ctaTitle">Looking for Pacific Islands Support?</h2></div>
                <div class="editable-section" onclick="editField('pacific', 'ctaSubtitle', 'CTA Subtitle')"><span class="edit-indicator">âœï¸</span><p id="pacific-ctaSubtitle">We're here to connect you with resources and support.</p></div>
            </section>
        </div>

        <!-- COMMUNITY (Bullying) -->
        <div class="page-preview" id="community-preview">
            <section class="hero-section">
                <div class="editable-section" onclick="editField('community', 'heroTitle', 'Hero Title')"><span class="edit-indicator">âœï¸</span><h1 id="community-heroTitle">âœŠ Stand Up to Bullying</h1></div>
                <div class="editable-section" onclick="editField('community', 'heroSubtitle', 'Hero Subtitle')"><span class="edit-indicator">âœï¸</span><p id="community-heroSubtitle">We can prevent bullying together! Take the pledge to help end bullying.</p></div>
            </section>
            <div class="content-wrapper"><div class="placeholder-section"><p>ğŸ“‹ Bullying resources and pledge form</p></div></div>
            <section class="cta-section">
                <div class="editable-section" onclick="editField('community', 'ctaTitle', 'CTA Title')"><span class="edit-indicator">âœï¸</span><h2 id="community-ctaTitle">Need Help with a Bullying Situation?</h2></div>
                <div class="editable-section" onclick="editField('community', 'ctaSubtitle', 'CTA Subtitle')"><span class="edit-indicator">âœï¸</span><p id="community-ctaSubtitle">Our team can help you understand your rights. Every child deserves to feel safe.</p></div>
            </section>
        </div>
    </div>

    <script>
        const firebaseConfig = { apiKey: "AIzaSyAU3CQ07bCVKlJ1qGak-150kaJEyPKldLk", authDomain: "ldah-932d5.firebaseapp.com", projectId: "ldah-932d5", storageBucket: "ldah-932d5.firebasestorage.app", messagingSenderId: "662130454003", appId: "1:662130454003:web:437576d5a5811ecd8df686" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();
        let isLoggedIn = false;
        const allPages = ['home', 'whoweare', 'events', 'volunteer', 'resources', 'contact', 'readiness', 'specialed', 'military', 'pacific', 'community'];
        let pageContent = {};
        allPages.forEach(p => pageContent[p] = {});

        document.addEventListener('DOMContentLoaded', async () => {
            auth.onAuthStateChanged(async (user) => {
                if (user) {
                    isLoggedIn = true;
                    document.getElementById('loginBox').style.display = 'none';
                    document.getElementById('loggedInBox').classList.add('active');
                    document.getElementById('userEmail').textContent = user.email;
                } else {
                    isLoggedIn = false;
                    document.getElementById('loginBox').style.display = 'block';
                    document.getElementById('loggedInBox').classList.remove('active');
                }
            });
            await loadAllContent();
        });

        async function loadAllContent() {
            for (const page of allPages) {
                try {
                    const doc = await db.collection('pageContent').doc(page).get();
                    if (doc.exists) {
                        pageContent[page] = doc.data();
                        Object.keys(pageContent[page]).forEach(key => {
                            const el = document.getElementById(page + '-' + key);
                            if (el && pageContent[page][key]) el.innerHTML = pageContent[page][key];
                        });
                    }
                } catch (err) { console.error('Error loading ' + page + ':', err); }
            }
        }

        function switchPage(page, btn) {
            document.querySelectorAll('.page-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            document.querySelectorAll('.page-preview').forEach(p => p.classList.remove('active'));
            document.getElementById(page + '-preview').classList.add('active');
        }

        function toggleAdmin() {
            const panel = document.getElementById('adminPanel');
            panel.classList.toggle('open');
            document.getElementById('adminToggle').textContent = panel.classList.contains('open') ? 'âœ–ï¸ Close' : 'ğŸ“ Edit';
        }

        async function login() {
            const email = document.getElementById('adminEmail').value;
            const password = document.getElementById('adminPassword').value;
            if (!email || !password) { alert('Please enter email and password'); return; }
            try {
                document.querySelector('#loginBox button').textContent = 'Logging in...';
                await auth.signInWithEmailAndPassword(email, password);
                alert('âœ… Logged in!');
            } catch (err) { alert('âŒ Login failed: ' + err.message); }
            finally { document.querySelector('#loginBox button').textContent = 'Login'; }
        }

        async function logout() { await auth.signOut(); alert('ğŸ‘‹ Logged out'); }

        function editField(pageId, fieldId, label) {
            if (!isLoggedIn) { alert('Please login first'); toggleAdmin(); return; }
            document.getElementById('welcomePanel').style.display = 'none';
            document.getElementById('editForm').classList.add('active');
            document.getElementById('editLabel').textContent = 'Editing: ' + label;
            document.getElementById('editId').value = fieldId;
            document.getElementById('editPage').value = pageId;
            const el = document.getElementById(pageId + '-' + fieldId);
            document.getElementById('editContent').value = el ? el.innerHTML.trim() : '';
            if (!document.getElementById('adminPanel').classList.contains('open')) toggleAdmin();
        }

        async function saveContent() {
            const pageId = document.getElementById('editPage').value;
            const fieldId = document.getElementById('editId').value;
            const content = document.getElementById('editContent').value;
            try {
                await db.collection('pageContent').doc(pageId).set({ [fieldId]: content, updatedAt: firebase.firestore.FieldValue.serverTimestamp() }, { merge: true });
                const el = document.getElementById(pageId + '-' + fieldId);
                if (el) el.innerHTML = content;
                pageContent[pageId][fieldId] = content;
                alert('âœ… Saved!');
                cancelEdit();
            } catch (err) { alert('âŒ Error: ' + err.message); }
        }

        function cancelEdit() {
            document.getElementById('editForm').classList.remove('active');
            document.getElementById('welcomePanel').style.display = 'block';
        }
    </script>
</body>
</html>

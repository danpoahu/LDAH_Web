<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LDAH Page Editor</title>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
    
    <style>
        :root {
            --primary-blue: #004E7C;
            --light-blue: #1A8FC4;
            --accent-gold: #F5A623;
            --dark-text: #333;
            --light-text: #666;
        }
        
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f5f5f5; }
        
        /* Admin Panel - slide in from right */
        .admin-panel {
            position: fixed; right: 0; top: 0; bottom: 0;
            width: 380px; background: white;
            box-shadow: -4px 0 20px rgba(0,0,0,0.15);
            transform: translateX(100%);
            transition: transform 0.3s ease;
            z-index: 1000; overflow-y: auto;
        }
        .admin-panel.open { transform: translateX(0); }
        
        .admin-panel-header {
            background: var(--primary-blue);
            color: white;
            padding: 1rem;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        .admin-toggle {
            position: fixed; right: 20px; bottom: 20px;
            z-index: 999; padding: 14px 24px;
            background: var(--primary-blue); color: white;
            border-radius: 50px; border: none;
            box-shadow: 0 4px 20px rgba(0, 78, 124, 0.4);
            cursor: pointer; font-weight: 600;
            font-size: 1rem;
        }
        .admin-toggle:hover { background: var(--light-blue); }
        
        /* Editable sections */
        .editable-section {
            position: relative;
            border: 2px dashed transparent;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .editable-section:hover {
            border-color: var(--primary-blue);
            background-color: rgba(0, 78, 124, 0.05);
        }
        .edit-indicator {
            position: absolute; top: -10px; right: 5px;
            background: var(--primary-blue); color: white;
            padding: 2px 8px; font-size: 11px;
            border-radius: 4px;
            opacity: 0; transition: opacity 0.3s ease;
            pointer-events: none;
        }
        .editable-section:hover .edit-indicator { opacity: 1; }
        
        /* Page Navigation */
        .page-nav {
            background: #1a1a2e;
            padding: 1rem;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .page-nav-inner {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
        }
        .page-nav h1 {
            color: white;
            font-size: 1.1rem;
            margin-right: auto;
        }
        .page-btn {
            background: rgba(255,255,255,0.1);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
        }
        .page-btn:hover, .page-btn.active {
            background: var(--primary-blue);
        }
        .page-btn.active {
            box-shadow: 0 0 0 2px white;
        }
        
        /* Page Preview Container */
        .page-preview {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            min-height: calc(100vh - 60px);
        }
        
        /* LDAH-style sections */
        .hero-section {
            background: linear-gradient(135deg, var(--primary-blue), var(--light-blue));
            color: white;
            padding: 4rem 2rem;
            text-align: center;
        }
        .hero-section h1 { font-size: 2.5rem; margin-bottom: 1rem; }
        .hero-section p { font-size: 1.2rem; opacity: 0.9; max-width: 600px; margin: 0 auto; }
        
        .content-section {
            padding: 3rem 2rem;
        }
        .content-section.alt { background: #f8fafc; }
        .content-section h2 {
            color: var(--primary-blue);
            font-size: 1.8rem;
            margin-bottom: 1rem;
        }
        .content-section p {
            color: var(--light-text);
            line-height: 1.7;
            margin-bottom: 1rem;
        }
        
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }
        .card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            border: 1px solid #e2e8f0;
        }
        .card h3 {
            color: var(--primary-blue);
            margin-bottom: 0.5rem;
        }
        .card p {
            color: var(--light-text);
            font-size: 0.95rem;
        }
        
        /* Edit Form in Panel */
        .edit-form {
            padding: 1rem;
            display: none;
        }
        .edit-form.active { display: block; }
        .edit-form label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--dark-text);
        }
        .edit-form input, .edit-form textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            margin-bottom: 1rem;
            font-family: inherit;
        }
        .edit-form textarea {
            min-height: 120px;
            resize: vertical;
        }
        .edit-form input:focus, .edit-form textarea:focus {
            outline: none;
            border-color: var(--primary-blue);
        }
        .btn-row {
            display: flex;
            gap: 0.5rem;
        }
        .btn-save {
            flex: 1;
            background: var(--primary-blue);
            color: white;
            border: none;
            padding: 0.75rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
        }
        .btn-save:hover { background: var(--light-blue); }
        .btn-cancel {
            flex: 1;
            background: #e2e8f0;
            color: var(--dark-text);
            border: none;
            padding: 0.75rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
        }
        .btn-cancel:hover { background: #cbd5e1; }
        
        /* Welcome/Login in panel */
        .welcome-panel {
            padding: 1.5rem;
        }
        .welcome-panel h3 {
            color: var(--primary-blue);
            margin-bottom: 1rem;
        }
        .welcome-panel ul {
            list-style: none;
            margin-bottom: 1.5rem;
        }
        .welcome-panel li {
            padding: 0.5rem 0;
            color: var(--light-text);
        }
        .welcome-panel li::before {
            content: "‚úì ";
            color: var(--primary-blue);
        }
        .login-box {
            background: #f0f9ff;
            border: 1px solid #bae6fd;
            border-radius: 8px;
            padding: 1rem;
        }
        .login-box input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            margin-bottom: 0.75rem;
        }
        .login-box button {
            width: 100%;
            background: var(--primary-blue);
            color: white;
            border: none;
            padding: 0.75rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
        }
        
        .logged-in-box {
            background: #f0fdf4;
            border: 1px solid #bbf7d0;
            border-radius: 8px;
            padding: 1rem;
            display: none;
        }
        .logged-in-box.active { display: block; }
        .logged-in-box p {
            color: #166534;
            margin-bottom: 1rem;
        }
        .btn-logout {
            width: 100%;
            background: #ef4444;
            color: white;
            border: none;
            padding: 0.75rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
        }
        
        /* Hide on mobile */
        @media (max-width: 768px) {
            .admin-toggle, .admin-panel { display: none; }
            .page-nav { font-size: 0.8rem; }
            .page-btn { padding: 0.4rem 0.6rem; font-size: 0.75rem; }
        }
        
        /* Impact numbers */
        .impact-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
            text-align: center;
            margin-top: 2rem;
        }
        .impact-item h3 {
            font-size: 2.5rem;
            color: var(--accent-gold);
            margin-bottom: 0.25rem;
        }
        .impact-item p {
            color: rgba(255,255,255,0.8);
            font-size: 0.9rem;
        }
        
        /* Footer */
        .footer {
            background: #1a1a2e;
            color: white;
            padding: 2rem;
            text-align: center;
        }
        .footer p { opacity: 0.7; font-size: 0.9rem; }
    </style>
</head>
<body>
    <!-- Page Navigation -->
    <nav class="page-nav">
        <div class="page-nav-inner">
            <h1>üìÑ LDAH Page Editor</h1>
            <button class="page-btn active" onclick="showPage('home')">Home</button>
            <button class="page-btn" onclick="showPage('whoweare')">Who We Are</button>
            <button class="page-btn" onclick="showPage('whatwedo')">What We Do</button>
            <button class="page-btn" onclick="showPage('events')">Events</button>
            <button class="page-btn" onclick="showPage('volunteer')">Volunteer</button>
            <button class="page-btn" onclick="showPage('resources')">Resources</button>
            <button class="page-btn" onclick="showPage('contact')">Contact</button>
            <a href="cms.html" class="page-btn" style="text-decoration: none;">‚Üê Back to CMS</a>
        </div>
    </nav>

    <!-- Admin Panel (slides in from right) -->
    <div class="admin-panel" id="adminPanel">
        <div class="admin-panel-header">
            <h2 style="font-size: 1.1rem;">‚úèÔ∏è Edit Content</h2>
        </div>
        
        <!-- Edit Form (hidden until something is clicked) -->
        <div class="edit-form" id="editForm">
            <label id="editLabel">Editing...</label>
            <input type="hidden" id="editId">
            <input type="hidden" id="editPage">
            <textarea id="editContent" placeholder="Enter content..."></textarea>
            <div class="btn-row">
                <button class="btn-cancel" onclick="cancelEdit()">Cancel</button>
                <button class="btn-save" onclick="saveContent()">üíæ Save</button>
            </div>
        </div>
        
        <!-- Welcome Panel -->
        <div class="welcome-panel" id="welcomePanel">
            <h3>üëã Welcome!</h3>
            <ul>
                <li>Click any text with a blue border to edit</li>
                <li>Changes save to Firebase instantly</li>
                <li>Content updates on the live site</li>
            </ul>
            
            <div class="login-box" id="loginBox">
                <p style="font-size: 0.85rem; color: #666; margin-bottom: 0.75rem;">üîê Enter password to edit:</p>
                <input type="password" id="adminPassword" placeholder="Password">
                <button onclick="login()">Login</button>
            </div>
            
            <div class="logged-in-box" id="loggedInBox">
                <p>‚úÖ <strong>Logged in!</strong> Click any text to edit.</p>
                <button class="btn-logout" onclick="logout()">üö™ Logout</button>
            </div>
        </div>
    </div>

    <!-- Admin Toggle Button -->
    <button class="admin-toggle" id="adminToggle" onclick="toggleAdmin()">
        üìù Edit Mode
    </button>

    <!-- Page Preview Container -->
    <div class="page-preview" id="pagePreview">
        <!-- Content loads dynamically -->
    </div>

    <script>
        // Firebase config
        const firebaseConfig = {
            apiKey: "AIzaSyAU3CQ07bCVKlJ1qGak-150kaJEyPKldLk",
            authDomain: "ldah-932d5.firebaseapp.com",
            projectId: "ldah-932d5",
            storageBucket: "ldah-932d5.firebasestorage.app",
            messagingSenderId: "662130454003",
            appId: "1:662130454003:web:437576d5a5811ecd8df686"
        };
        
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();
        
        let isLoggedIn = false;
        let currentPage = 'home';
        let pageContent = {};
        
        // Page templates
        const pageTemplates = {
            home: `
                <div class="hero-section">
                    <div class="editable-section" data-field="heroTitle" onclick="editField('home', 'heroTitle', 'Hero Title')">
                        <span class="edit-indicator">‚úèÔ∏è Edit</span>
                        <h1 id="home-heroTitle">Leadership in Disabilities & Achievement of Hawai'i</h1>
                    </div>
                    <div class="editable-section" data-field="heroSubtitle" onclick="editField('home', 'heroSubtitle', 'Hero Subtitle')">
                        <span class="edit-indicator">‚úèÔ∏è Edit</span>
                        <p id="home-heroSubtitle">Empowering individuals with disabilities and their families through education, advocacy, and community support since 1994.</p>
                    </div>
                    <div class="impact-grid" style="margin-top: 3rem;">
                        <div class="impact-item editable-section" onclick="editField('home', 'impactYears', 'Years Number')">
                            <span class="edit-indicator">‚úèÔ∏è Edit</span>
                            <h3 id="home-impactYears">30+</h3>
                            <p>Years of Service</p>
                        </div>
                        <div class="impact-item editable-section" onclick="editField('home', 'impactFamilies', 'Families Number')">
                            <span class="edit-indicator">‚úèÔ∏è Edit</span>
                            <h3 id="home-impactFamilies">5,000+</h3>
                            <p>Families Served</p>
                        </div>
                        <div class="impact-item editable-section" onclick="editField('home', 'impactVolunteers', 'Volunteers Number')">
                            <span class="edit-indicator">‚úèÔ∏è Edit</span>
                            <h3 id="home-impactVolunteers">500+</h3>
                            <p>Volunteers</p>
                        </div>
                    </div>
                </div>
                <div class="content-section">
                    <div class="editable-section" onclick="editField('home', 'missionTitle', 'Mission Title')">
                        <span class="edit-indicator">‚úèÔ∏è Edit</span>
                        <h2 id="home-missionTitle">Our Mission</h2>
                    </div>
                    <div class="editable-section" onclick="editField('home', 'missionText', 'Mission Text')">
                        <span class="edit-indicator">‚úèÔ∏è Edit</span>
                        <p id="home-missionText">LDAH is committed to empowering children and adults with all disabilities and the people who care for and about them. We provide education, support, and resources to help individuals with disabilities reach their full potential.</p>
                    </div>
                </div>
                <div class="content-section alt">
                    <div class="editable-section" onclick="editField('home', 'servicesTitle', 'Services Title')">
                        <span class="edit-indicator">‚úèÔ∏è Edit</span>
                        <h2 id="home-servicesTitle">What We Do</h2>
                    </div>
                    <div class="card-grid">
                        <div class="card">
                            <div class="editable-section" onclick="editField('home', 'service1Title', 'Service 1 Title')">
                                <span class="edit-indicator">‚úèÔ∏è Edit</span>
                                <h3 id="home-service1Title">üì¢ Advocacy</h3>
                            </div>
                            <div class="editable-section" onclick="editField('home', 'service1Desc', 'Service 1 Description')">
                                <span class="edit-indicator">‚úèÔ∏è Edit</span>
                                <p id="home-service1Desc">We advocate for the rights of individuals with disabilities at the local, state, and federal levels.</p>
                            </div>
                        </div>
                        <div class="card">
                            <div class="editable-section" onclick="editField('home', 'service2Title', 'Service 2 Title')">
                                <span class="edit-indicator">‚úèÔ∏è Edit</span>
                                <h3 id="home-service2Title">üéì Education</h3>
                            </div>
                            <div class="editable-section" onclick="editField('home', 'service2Desc', 'Service 2 Description')">
                                <span class="edit-indicator">‚úèÔ∏è Edit</span>
                                <p id="home-service2Desc">We provide workshops, trainings, and resources to help families navigate disability services.</p>
                            </div>
                        </div>
                        <div class="card">
                            <div class="editable-section" onclick="editField('home', 'service3Title', 'Service 3 Title')">
                                <span class="edit-indicator">‚úèÔ∏è Edit</span>
                                <h3 id="home-service3Title">ü§ù Community</h3>
                            </div>
                            <div class="editable-section" onclick="editField('home', 'service3Desc', 'Service 3 Description')">
                                <span class="edit-indicator">‚úèÔ∏è Edit</span>
                                <p id="home-service3Desc">We bring families together through events, support groups, and community programs.</p>
                            </div>
                        </div>
                    </div>
                </div>
            `,
            whoweare: `
                <div class="hero-section" style="padding: 3rem 2rem;">
                    <div class="editable-section" onclick="editField('whoweare', 'pageTitle', 'Page Title')">
                        <span class="edit-indicator">‚úèÔ∏è Edit</span>
                        <h1 id="whoweare-pageTitle">Who We Are</h1>
                    </div>
                    <div class="editable-section" onclick="editField('whoweare', 'pageSubtitle', 'Page Subtitle')">
                        <span class="edit-indicator">‚úèÔ∏è Edit</span>
                        <p id="whoweare-pageSubtitle">Meet the dedicated team working to support Hawaii's disability community.</p>
                    </div>
                </div>
                <div class="content-section">
                    <div class="editable-section" onclick="editField('whoweare', 'historyTitle', 'History Title')">
                        <span class="edit-indicator">‚úèÔ∏è Edit</span>
                        <h2 id="whoweare-historyTitle">Our History</h2>
                    </div>
                    <div class="editable-section" onclick="editField('whoweare', 'historyText', 'History Text')">
                        <span class="edit-indicator">‚úèÔ∏è Edit</span>
                        <p id="whoweare-historyText">Founded in 1994, LDAH began as a small group of parents seeking resources for their children with disabilities. Over the past three decades, we have grown into a statewide organization serving thousands of families across all Hawaiian islands.</p>
                    </div>
                </div>
                <div class="content-section alt">
                    <div class="editable-section" onclick="editField('whoweare', 'valuesTitle', 'Values Title')">
                        <span class="edit-indicator">‚úèÔ∏è Edit</span>
                        <h2 id="whoweare-valuesTitle">Our Values</h2>
                    </div>
                    <div class="editable-section" onclick="editField('whoweare', 'valuesText', 'Values Text')">
                        <span class="edit-indicator">‚úèÔ∏è Edit</span>
                        <p id="whoweare-valuesText">We believe in inclusion, empowerment, and the inherent dignity of every individual. Our work is guided by the voices of people with disabilities and their families, ensuring that our programs and advocacy efforts reflect their needs and aspirations.</p>
                    </div>
                </div>
            `,
            whatwedo: `
                <div class="hero-section" style="padding: 3rem 2rem;">
                    <div class="editable-section" onclick="editField('whatwedo', 'pageTitle', 'Page Title')">
                        <span class="edit-indicator">‚úèÔ∏è Edit</span>
                        <h1 id="whatwedo-pageTitle">What We Do</h1>
                    </div>
                    <div class="editable-section" onclick="editField('whatwedo', 'pageSubtitle', 'Page Subtitle')">
                        <span class="edit-indicator">‚úèÔ∏è Edit</span>
                        <p id="whatwedo-pageSubtitle">Comprehensive programs and services for the disability community.</p>
                    </div>
                </div>
                <div class="content-section">
                    <div class="editable-section" onclick="editField('whatwedo', 'advocacyTitle', 'Advocacy Title')">
                        <span class="edit-indicator">‚úèÔ∏è Edit</span>
                        <h2 id="whatwedo-advocacyTitle">üì¢ Advocacy</h2>
                    </div>
                    <div class="editable-section" onclick="editField('whatwedo', 'advocacyText', 'Advocacy Text')">
                        <span class="edit-indicator">‚úèÔ∏è Edit</span>
                        <p id="whatwedo-advocacyText">We advocate at all levels of government for policies that support individuals with disabilities. Our advocacy efforts include legislative testimony, community organizing, and public awareness campaigns.</p>
                    </div>
                </div>
                <div class="content-section alt">
                    <div class="editable-section" onclick="editField('whatwedo', 'educationTitle', 'Education Title')">
                        <span class="edit-indicator">‚úèÔ∏è Edit</span>
                        <h2 id="whatwedo-educationTitle">üéì Education & Training</h2>
                    </div>
                    <div class="editable-section" onclick="editField('whatwedo', 'educationText', 'Education Text')">
                        <span class="edit-indicator">‚úèÔ∏è Edit</span>
                        <p id="whatwedo-educationText">We provide workshops, webinars, and training sessions on topics including IEP development, transition planning, self-advocacy skills, and navigating disability services.</p>
                    </div>
                </div>
                <div class="content-section">
                    <div class="editable-section" onclick="editField('whatwedo', 'antibullyingTitle', 'Anti-Bullying Title')">
                        <span class="edit-indicator">‚úèÔ∏è Edit</span>
                        <h2 id="whatwedo-antibullyingTitle">üõ°Ô∏è Anti-Bullying Initiative</h2>
                    </div>
                    <div class="editable-section" onclick="editField('whatwedo', 'antibullyingText', 'Anti-Bullying Text')">
                        <span class="edit-indicator">‚úèÔ∏è Edit</span>
                        <p id="whatwedo-antibullyingText">Our anti-bullying program works with schools and communities to create safe, inclusive environments for all students, with a special focus on protecting students with disabilities.</p>
                    </div>
                </div>
            `,
            events: `
                <div class="hero-section" style="padding: 3rem 2rem;">
                    <div class="editable-section" onclick="editField('events', 'pageTitle', 'Page Title')">
                        <span class="edit-indicator">‚úèÔ∏è Edit</span>
                        <h1 id="events-pageTitle">Events</h1>
                    </div>
                    <div class="editable-section" onclick="editField('events', 'pageSubtitle', 'Page Subtitle')">
                        <span class="edit-indicator">‚úèÔ∏è Edit</span>
                        <p id="events-pageSubtitle">Join us for workshops, community gatherings, and special events.</p>
                    </div>
                </div>
                <div class="content-section">
                    <div class="editable-section" onclick="editField('events', 'eventsIntro', 'Events Introduction')">
                        <span class="edit-indicator">‚úèÔ∏è Edit</span>
                        <p id="events-eventsIntro">Throughout the year, LDAH hosts a variety of events designed to educate, connect, and celebrate our community. From educational workshops to family fun days, there's something for everyone.</p>
                    </div>
                </div>
                <div class="content-section alt">
                    <div class="editable-section" onclick="editField('events', 'ctaTitle', 'CTA Title')">
                        <span class="edit-indicator">‚úèÔ∏è Edit</span>
                        <h2 id="events-ctaTitle">Host an Event with Us</h2>
                    </div>
                    <div class="editable-section" onclick="editField('events', 'ctaText', 'CTA Text')">
                        <span class="edit-indicator">‚úèÔ∏è Edit</span>
                        <p id="events-ctaText">Interested in partnering with LDAH for a community event? We're always looking for opportunities to bring disability awareness and resources to new audiences.</p>
                    </div>
                </div>
            `,
            volunteer: `
                <div class="hero-section" style="padding: 3rem 2rem;">
                    <div class="editable-section" onclick="editField('volunteer', 'pageTitle', 'Page Title')">
                        <span class="edit-indicator">‚úèÔ∏è Edit</span>
                        <h1 id="volunteer-pageTitle">Volunteer With Us</h1>
                    </div>
                    <div class="editable-section" onclick="editField('volunteer', 'pageSubtitle', 'Page Subtitle')">
                        <span class="edit-indicator">‚úèÔ∏è Edit</span>
                        <p id="volunteer-pageSubtitle">Make a difference in the lives of individuals with disabilities and their families.</p>
                    </div>
                </div>
                <div class="content-section">
                    <div class="editable-section" onclick="editField('volunteer', 'whyTitle', 'Why Volunteer Title')">
                        <span class="edit-indicator">‚úèÔ∏è Edit</span>
                        <h2 id="volunteer-whyTitle">Why Volunteer?</h2>
                    </div>
                    <div class="editable-section" onclick="editField('volunteer', 'whyText', 'Why Volunteer Text')">
                        <span class="edit-indicator">‚úèÔ∏è Edit</span>
                        <p id="volunteer-whyText">Volunteering with LDAH is a rewarding way to give back to your community. Whether you have a few hours or can make a regular commitment, your time and talents make a real difference for families across Hawaii.</p>
                    </div>
                </div>
            `,
            resources: `
                <div class="hero-section" style="padding: 3rem 2rem;">
                    <div class="editable-section" onclick="editField('resources', 'pageTitle', 'Page Title')">
                        <span class="edit-indicator">‚úèÔ∏è Edit</span>
                        <h1 id="resources-pageTitle">Resources</h1>
                    </div>
                    <div class="editable-section" onclick="editField('resources', 'pageSubtitle', 'Page Subtitle')">
                        <span class="edit-indicator">‚úèÔ∏è Edit</span>
                        <p id="resources-pageSubtitle">Find the support and information you need.</p>
                    </div>
                </div>
                <div class="content-section">
                    <div class="editable-section" onclick="editField('resources', 'resourcesIntro', 'Resources Introduction')">
                        <span class="edit-indicator">‚úèÔ∏è Edit</span>
                        <p id="resources-resourcesIntro">We've compiled a comprehensive directory of disability resources available in Hawaii. Whether you're looking for healthcare providers, educational support, or community services, we're here to help you find what you need.</p>
                    </div>
                </div>
            `,
            contact: `
                <div class="hero-section" style="padding: 3rem 2rem;">
                    <div class="editable-section" onclick="editField('contact', 'pageTitle', 'Page Title')">
                        <span class="edit-indicator">‚úèÔ∏è Edit</span>
                        <h1 id="contact-pageTitle">Contact Us</h1>
                    </div>
                    <div class="editable-section" onclick="editField('contact', 'pageSubtitle', 'Page Subtitle')">
                        <span class="edit-indicator">‚úèÔ∏è Edit</span>
                        <p id="contact-pageSubtitle">We're here to help. Reach out to us today.</p>
                    </div>
                </div>
                <div class="content-section">
                    <div class="card-grid" style="grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));">
                        <div class="card">
                            <h3>üìç Address</h3>
                            <div class="editable-section" onclick="editField('contact', 'address', 'Address')">
                                <span class="edit-indicator">‚úèÔ∏è Edit</span>
                                <p id="contact-address">245 N. Kukui Street, Suite 205<br>Honolulu, HI 96817</p>
                            </div>
                        </div>
                        <div class="card">
                            <h3>üìû Phone</h3>
                            <div class="editable-section" onclick="editField('contact', 'phone', 'Phone Number')">
                                <span class="edit-indicator">‚úèÔ∏è Edit</span>
                                <p id="contact-phone">(808) 536-9684</p>
                            </div>
                        </div>
                        <div class="card">
                            <h3>‚úâÔ∏è Email</h3>
                            <div class="editable-section" onclick="editField('contact', 'email', 'Email Address')">
                                <span class="edit-indicator">‚úèÔ∏è Edit</span>
                                <p id="contact-email">info@ldahawaii.org</p>
                            </div>
                        </div>
                        <div class="card">
                            <h3>üïê Hours</h3>
                            <div class="editable-section" onclick="editField('contact', 'hours', 'Office Hours')">
                                <span class="edit-indicator">‚úèÔ∏è Edit</span>
                                <p id="contact-hours">Monday - Friday<br>8:30 AM - 4:30 PM</p>
                            </div>
                        </div>
                    </div>
                </div>
            `
        };
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            // Check session
            if (sessionStorage.getItem('ldah_admin') === 'true') {
                isLoggedIn = true;
                document.getElementById('loginBox').style.display = 'none';
                document.getElementById('loggedInBox').classList.add('active');
            }
            showPage('home');
        });
        
        function toggleAdmin() {
            const panel = document.getElementById('adminPanel');
            const toggle = document.getElementById('adminToggle');
            panel.classList.toggle('open');
            toggle.textContent = panel.classList.contains('open') ? '‚úñÔ∏è Close' : 'üìù Edit Mode';
        }
        
        function login() {
            const password = document.getElementById('adminPassword').value;
            if (password === 'ldah2024') {
                isLoggedIn = true;
                sessionStorage.setItem('ldah_admin', 'true');
                document.getElementById('loginBox').style.display = 'none';
                document.getElementById('loggedInBox').classList.add('active');
                alert('‚úÖ Logged in! You can now edit page content.');
            } else {
                alert('‚ùå Incorrect password');
            }
        }
        
        function logout() {
            isLoggedIn = false;
            sessionStorage.removeItem('ldah_admin');
            document.getElementById('loginBox').style.display = 'block';
            document.getElementById('loggedInBox').classList.remove('active');
            alert('üëã Logged out');
        }
        
        async function showPage(pageId) {
            currentPage = pageId;
            
            // Update nav buttons
            document.querySelectorAll('.page-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`.page-btn[onclick="showPage('${pageId}')"]`)?.classList.add('active');
            
            // Load template
            const preview = document.getElementById('pagePreview');
            preview.innerHTML = pageTemplates[pageId] || '<p>Page not found</p>';
            
            // Load content from Firebase
            try {
                const doc = await db.collection('pageContent').doc(pageId).get();
                if (doc.exists) {
                    pageContent[pageId] = doc.data();
                    // Update displayed content
                    Object.keys(pageContent[pageId]).forEach(key => {
                        const el = document.getElementById(`${pageId}-${key}`);
                        if (el && pageContent[pageId][key]) {
                            el.innerHTML = pageContent[pageId][key];
                        }
                    });
                }
            } catch (err) {
                console.error('Error loading content:', err);
            }
        }
        
        function editField(pageId, fieldId, label) {
            if (!isLoggedIn) {
                alert('‚ö†Ô∏è Please login first');
                toggleAdmin();
                return;
            }
            
            // Show edit form
            document.getElementById('welcomePanel').style.display = 'none';
            document.getElementById('editForm').classList.add('active');
            
            // Fill form
            document.getElementById('editLabel').textContent = `Editing: ${label}`;
            document.getElementById('editId').value = fieldId;
            document.getElementById('editPage').value = pageId;
            
            const currentContent = document.getElementById(`${pageId}-${fieldId}`)?.innerHTML || '';
            document.getElementById('editContent').value = currentContent.trim();
            
            // Open panel if not open
            if (!document.getElementById('adminPanel').classList.contains('open')) {
                toggleAdmin();
            }
        }
        
        async function saveContent() {
            const pageId = document.getElementById('editPage').value;
            const fieldId = document.getElementById('editId').value;
            const content = document.getElementById('editContent').value;
            
            try {
                // Save to Firebase
                await db.collection('pageContent').doc(pageId).set({
                    [fieldId]: content,
                    updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                }, { merge: true });
                
                // Update display
                const el = document.getElementById(`${pageId}-${fieldId}`);
                if (el) el.innerHTML = content;
                
                // Update local cache
                if (!pageContent[pageId]) pageContent[pageId] = {};
                pageContent[pageId][fieldId] = content;
                
                alert('‚úÖ Saved!');
                cancelEdit();
            } catch (err) {
                console.error('Save error:', err);
                alert('‚ùå Error saving: ' + err.message);
            }
        }
        
        function cancelEdit() {
            document.getElementById('editForm').classList.remove('active');
            document.getElementById('welcomePanel').style.display = 'block';
        }
    </script>
</body>
</html>
